<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Helper classes</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.16c93b31.css" as="style"><link rel="preload" href="/assets/js/app.38dc2da7.js" as="script"><link rel="preload" href="/assets/js/33.b37a3e52.js" as="script"><link rel="prefetch" href="/assets/js/10.f1607b87.js"><link rel="prefetch" href="/assets/js/11.5935f050.js"><link rel="prefetch" href="/assets/js/12.e6a5ca86.js"><link rel="prefetch" href="/assets/js/13.78ae9647.js"><link rel="prefetch" href="/assets/js/14.a029e60a.js"><link rel="prefetch" href="/assets/js/15.ffe0034a.js"><link rel="prefetch" href="/assets/js/16.1114c444.js"><link rel="prefetch" href="/assets/js/17.0f1b6827.js"><link rel="prefetch" href="/assets/js/18.a3e3e402.js"><link rel="prefetch" href="/assets/js/19.ef7aad5c.js"><link rel="prefetch" href="/assets/js/2.da451cf3.js"><link rel="prefetch" href="/assets/js/20.e0b1db2d.js"><link rel="prefetch" href="/assets/js/21.40954eb3.js"><link rel="prefetch" href="/assets/js/22.212fc021.js"><link rel="prefetch" href="/assets/js/23.a314009f.js"><link rel="prefetch" href="/assets/js/24.cd8f299f.js"><link rel="prefetch" href="/assets/js/25.d2e6dbd5.js"><link rel="prefetch" href="/assets/js/26.7c8fed17.js"><link rel="prefetch" href="/assets/js/27.aca225c8.js"><link rel="prefetch" href="/assets/js/28.8015e33a.js"><link rel="prefetch" href="/assets/js/29.18be192f.js"><link rel="prefetch" href="/assets/js/3.3a07ef4f.js"><link rel="prefetch" href="/assets/js/30.bf2c58ed.js"><link rel="prefetch" href="/assets/js/31.7d298cf9.js"><link rel="prefetch" href="/assets/js/32.acbdc620.js"><link rel="prefetch" href="/assets/js/34.a6d5a9bf.js"><link rel="prefetch" href="/assets/js/35.aef6c1df.js"><link rel="prefetch" href="/assets/js/36.fed52b27.js"><link rel="prefetch" href="/assets/js/37.1a2efafc.js"><link rel="prefetch" href="/assets/js/38.99baad0c.js"><link rel="prefetch" href="/assets/js/39.3dd6385d.js"><link rel="prefetch" href="/assets/js/4.8d350108.js"><link rel="prefetch" href="/assets/js/5.e19c8ee8.js"><link rel="prefetch" href="/assets/js/6.955488f3.js"><link rel="prefetch" href="/assets/js/7.0f86fe07.js"><link rel="prefetch" href="/assets/js/8.b867c26c.js"><link rel="prefetch" href="/assets/js/9.e743477c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.16c93b31.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/compuware.png" alt="" class="logo"> <!----></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pipelines/" class="nav-link router-link-active">Pipelines</a></div><div class="nav-item"><a href="/tool_configuration/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/code_examples/" class="nav-link">APIs</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pipelines/" class="nav-link router-link-active">Pipelines</a></div><div class="nav-item"><a href="/tool_configuration/" class="nav-link">Configuration</a></div><div class="nav-item"><a href="/code_examples/" class="nav-link">APIs</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pipelines/" class="sidebar-link">Getting Started</a></li><li><a href="/pipelines/pipelines.html" class="sidebar-link">Example Pipelines</a></li><li><a href="/pipelines/Mainframe_CI_Pipeline_from_Shared_Lib.html" class="sidebar-link">Shared Library Example</a></li><li><a href="/pipelines/Mainframe-CI-Example-pipeline.html" class="sidebar-link">Basic Example</a></li><li><a href="/pipelines/scenario/" class="sidebar-link">ISPW Scenario</a></li><li><a href="/pipelines/scenario/TTT_scenario.html" class="sidebar-link">Total Test User Scenario</a></li><li><a href="/pipelines/pipeline_parameters.html" class="sidebar-link">Pipeline Parameters</a></li><li><a href="/pipelines/config_files.html" class="sidebar-link">Configuration Files</a></li><li><a href="/pipelines/helper_classes/" class="active sidebar-link">Helper classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#filehelper" class="sidebar-link">FileHelper</a></li><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#githelper" class="sidebar-link">GitHelper</a></li><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#ispwhelper" class="sidebar-link">IspwHelper</a></li><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#jclskeleton" class="sidebar-link">JclSkeleton</a></li><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#pipelineconfig" class="sidebar-link">PipelineConfig</a></li><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#sonarhelper" class="sidebar-link">SonarHelper</a></li><li class="sidebar-sub-header"><a href="/pipelines/helper_classes/#ttthelper" class="sidebar-link">TttHelper</a></li></ul></li><li><a href="/pipelines/Jenkins_Groovy.html" class="sidebar-link">Groovy Tips</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="helper-classes"><a href="#helper-classes" aria-hidden="true" class="header-anchor">#</a> Helper classes</h1> <p>The helper classes primarily serve as wrapper classes for the use of the different methods used by the plugins. Other serve purposes like provided configuration data (<code>PipelineConfig</code>) or preparing <code>JCL</code> for one specific execution of a pipeline (<code>JclSkeleton</code>).</p> <h2 id="filehelper"><a href="#filehelper" aria-hidden="true" class="header-anchor">#</a> FileHelper</h2> <p>The <a href="/pipelines/helper_classes/FileHelper.html"><code>FileHelper</code></a> class is used to read external files and provides the methods</p> <p><a href="/pipelines/helper_classes/FileHelper.html#FileHelper"><code>FileHelper(steps)</code></a></p> <blockquote><p>The constructor recieves the <code>steps</code> from the pipeline to <a href="/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>.</p></blockquote> <p><a href="/pipelines/helper_classes/FileHelper.html#readLines"><code>readLines(String path)</code></a></p> <blockquote><p>reads the records of a file at location <code>path</code> and returns an <code>ArrayList</code> of the individual records.</p></blockquote> <h2 id="githelper"><a href="#githelper" aria-hidden="true" class="header-anchor">#</a> GitHelper</h2> <p>The <a href="/pipelines/helper_classes/GitHelper.html"><code>GitHelper</code></a> class serves as a wrapper around the Git SCM plugin and provides the methods</p> <p><a href="/pipelines/helper_classes/GitHelper.html#GitHelper"><code>GitHelper(steps)</code></a></p> <blockquote><p>The constructor recieves the <code>steps</code> from the pipeline to <a href="/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>.</p></blockquote> <p><a href="/pipelines/helper_classes/GitHelper.html#checkout"><code>checkout(String gitUrl, String gitBranch, String gitCredentials, String tttFolder)</code></a></p> <blockquote><p>checks out the branch <code>gitBranch</code> in the Git(Hub) repository at <code>gitUrl</code>. It uses the <code>gitCredentials</code> to authenticate, and places the cloned Git repository into the folder <code>tttFolder</code> (within the Jenkins workspace).</p></blockquote> <p><a href="/pipelines/helper_classes/GitHelper.html#checkoutPath"><code>checkoutPath(String gitUrl, String gitBranch, String path, String gitCredentials, String gitProject)</code></a></p> <blockquote><p>performs a <em>sparse checkout</em>, and checks out path <code>path</code> in the branch <code>gitBranch</code> in the project <code>gitProject</code> in the Git(Hub) repository at <code>gitUrl</code>. It uses the <code>gitCredentials</code> to authenticate.</p></blockquote> <h2 id="ispwhelper"><a href="#ispwhelper" aria-hidden="true" class="header-anchor">#</a> IspwHelper</h2> <p>The <a href="/pipelines/helper_classes/IspwHelper.html"><code>IspwHelper</code></a> class serves as a wrapper around the Compuware ISPW plugin and provides the methods</p> <p><code>IspwHelper(steps, pConfig)</code></p> <blockquote><p>The constructor recieves the <code>steps</code> from the pipeline to <a href="/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a> and a <a href="/pipelines/helper_classes/#PipelineConfig"><code>PipelineConfig</code></a> to make use of pipeline execution specific parameters.</p></blockquote> <p><a href="/pipelines/helper_classes/IspwHelper.html#downloadSources"><code>downloadSources()</code></a></p> <blockquote><p>downloads all sources (COBOL programs and copybooks) contained in <a href="/pipelines/scenario/">ISPW set</a> triggering the pipeline</p></blockquote> <p><a href="/pipelines/helper_classes/IspwHelper.html#downloadCopyBooks"><code>downloadCopyBooks(String workspace)</code></a></p> <blockquote><ul><li>recieves the path to the <code>workspace</code> of the pipeline job</li> <li>uses the <code>referencedCopyBooks</code> method to determine all copybooks used by the download COBOL programs</li> <li>uses a <a href="/pipelines/helper_classes/Jcl_skeletons.html"><code>JclSkeleton</code></a> object's <code>createIebcopyCopyBooksJcl</code> method to create an <code>IEBCOPY</code> job <code>JCL</code> that copies all required copybooks in the list from the ISPW libraries into a temporary PDS</li> <li>submits this <code>JCL</code> using the <a href="https://wiki.jenkins.io/display/JENKINS/Compuware+Topaz+Utilities+Plugin" target="_blank" rel="noopener noreferrer">Topaz Utilities<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> plugin</li> <li>downloads the content of the temporary PDS, using the <a href="https://wiki.jenkins.io/display/JENKINS/Compuware+Source+Code+Download+for+Endevor,+PDS,+and+ISPW+Plugin" target="_blank" rel="noopener noreferrer">ISPW PDS downloader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>uses the <code>JclSkeleton</code> method <code>jclSkeleton.createDeleteTempDsn</code> to create a <code>DELETE</code> job <code>JCL</code></li> <li>and submits that <code>JCL</code></li></ul></blockquote> <p><a href="/pipelines/helper_classes/IspwHelper.html#referencedCopyBooks"><code>referencedCopyBooks(String workspace)</code></a></p> <blockquote><ul><li>recieves the path to the <code>workspace</code> of the pipeline job</li> <li>searches all <code>*.cbl</code> program sources in the folder containing all downloaded sources and builds a list of COBOL programs</li> <li>for each program in the list it</li> <li>reads the source file</li> <li>scans the content for valid <code>COPY</code> statements (e.g. not comments)</li> <li>determines the referenced copybook</li> <li>add each copybook to the list of copybooks</li> <li>returns the resulting list of copybooks</li></ul></blockquote> <p><a href="/pipelines/helper_classes/IspwHelper.html#regressAssignmentList"><code>regressAssignmentList(assignmentList, cesToken)</code></a></p> <blockquote><p>recieves a list of assignment IDs in <code>assignmentList</code>, the <a href>CES Token</a> in <code>cesToken</code> and calls method <code>regressAssignment</code> for each element of <code>assignmentList</code></p></blockquote> <p><a href="/pipelines/helper_classes/IspwHelper.html#regressAssignment"><code>def regressAssignment(assignment, cesToken)</code></a></p> <blockquote><p>receives an Assignment ID in <code>assigment</code>, the <a href>CES Token</a> in <code>cesToken</code> and uses the ISPW REST API to regress the assignment</p></blockquote> <h2 id="jclskeleton"><a href="#jclskeleton" aria-hidden="true" class="header-anchor">#</a> JclSkeleton</h2> <p>The <a href="/pipelines/helper_classes/JclSkeleton.html"><code>JclSkeleton</code></a> class allows the pipelines to customize pieces of <code>JCL</code> in certain, predefined ways. This allows changing e.g. <code>job cards</code>, <code>STEPLIB</code> concatenations and others during runtime. The <code>JCL</code> skeletons are read from folder <a href="/pipelines/helper_classes/Jcl_skeletons.html">'./config/skels'</a> in the pipeline workspace.</p> <p><a href="/pipelines/helper_classes/Jcl_skeletons.html#JclSkeleton"><code>JclSkeleton(steps, String workspace, String ispwApplication, String ispwPathNum)</code></a></p> <blockquote><p>The constructor recieves the <code>steps</code> from the pipeline to <a href="/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>, the path to the pipeline <code>workpace</code>, the name of the ISPW application in <code>ispwApplication</code> and the <a href="/pipelines/scenario/TTT_scenario.html">number of the development path</a> in <code>pathNum</code>.</p></blockquote> <p><a href="/pipelines/helper_classes/Jcl_skeletons.html#initialize"><code>initialize()</code></a></p> <blockquote><p>is used for additional <a href="/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the custructor</a> and</p> <ul><li>reads the <code>JobCard.jcl</code> skeleton file</li> <li>reads the <code>deleteDs.skel</code> skeleton file</li> <li>initializes the <code>IEBCOPY</code> <code>JCL</code> by using the <code>buildIebcopySkel</code> method</li></ul></blockquote> <p><a href="/pipelines/helper_classes/Jcl_skeletons.html"><code>buildIebcopySkel()</code></a></p> <blockquote><p>initializes the <code>IEBCOPY</code> <code>JCL</code> by</p> <ul><li>reading the <code>iebcopy.skel</code> skeleton file (main <code>JCL</code>)</li> <li>reading the <code>iebcopyInDd.skel</code> skeleton file (input <code>DD</code> statements)</li> <li>building the required <code>INDD=INx</code> cards</li> <li>replacing the placeholders in the skeleton <code>JCL</code> by the conrete values</li> <li>returning the resulting <code>JCL</code> code</li></ul></blockquote> <p><a href="/pipelines/helper_classes/Jcl_skeletons.html"><code>createIebcopyCopyBooksJcl(String targetDsn, List copyMembers)</code></a></p> <blockquote><p>recieves the target DSN for the <code>IEBCOPY</code> job in <code>targetDsn</code> and the list of required copybooks in <code>copyMembers</code> and</p> <ul><li>places the <code>job card</code> from <code>initialize</code> in front of the <code>JCL</code> code</li> <li>builds a <code>SELECT MEMBER=</code> card for each entry in <code>copyMembers</code></li> <li>replaces the placeholders in the skeleton <code>JCL</code> by the conrete values</li> <li>returns the resulting <code>JCL</code>code</li></ul></blockquote> <p><a href="/pipelines/helper_classes/Jcl_skeletons.html"><code>createDeleteTempDsn(String targetDsn)</code></a></p> <blockquote><p>recieves the target DSN for the <code>DELETE</code> job in <code>targetDsn</code> and</p> <ul><li>places the <code>job card</code> from <code>initialize</code> in front of the <code>JCL</code> code</li> <li>adds the <code>DELETE</code> skeleton code</li> <li>replaces the placeholders in the skeleton <code>JCL</code> by the conrete values</li> <li>returns the resulting <code>JCL</code>code</li></ul></blockquote> <p><a href="/pipelines/helper_classes/Jcl_skeletons.html"><code>readSkelFile(String fileName)</code></a></p> <blockquote><p>receives a <code>fileName</code> and</p> <ul><li>reads the corresponding file from the skeletons folder in the pipeline workspace</li> <li>returns the content of the file as list of records</li></ul></blockquote> <h2 id="pipelineconfig"><a href="#pipelineconfig" aria-hidden="true" class="header-anchor">#</a> PipelineConfig</h2> <p>The <a href="/pipelines/helper_classes/PipelineConfig.html"><code>PipelineConfig</code></a> class stores and allows retrieval of any pipeline <a href="/pipelines/pipeline_parameters.html">configuration and runtime specific parameters</a>.</p> <p><a href="/pipelines/helper_classes/PipelineConfig.html#PipelineConfig"><code>PipelineConfig(steps, workspace, params, mailListLines)</code></a></p> <blockquote><p>The constructor recieves the <code>steps</code> from the pipeline to <a href="/pipelines/Jenkins_Groovy.html">allow use of pipeline step within the class code</a>, the path of the pipeline <code>workspace</code> the <code>Map</code> <code>params</code> containing the <code>key:value</code> parameter pairs from the <a href="/pipelines/Mainframe_CI_Pipeline_from_Shared_Lib.html">pipeline call</a>, and a the list of records from the <a href="/tool_configuration/"><code>mailList.config</code> file</a> and initializes all parameters that can be initialized immediately.</p></blockquote> <p><a href=".PipelineConfig#initialize"><code>initialize()</code></a></p> <blockquote><p>is used for additional <a href="/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the custructor</a> and</p> <ul><li>deletes any old content from the pipeline workspace</li> <li>Uses the <code>checkoutPath</code>method of the <a href="#GitHelper"><code>GitHelper</code> class</a> to download the path containing the configuration files from the GitHub repository containing the configuration. (In future configuration files will be move to <a href="/tool_configuration/">Managed Files</a>, thus avoiding to have to download configuration from GitHub and exposure of configuration on GitHub.)</li> <li>execute the following internal methods to set the remaining configuration values</li></ul></blockquote> <p><a href=".PipelineConfig#setServerConfig"><code>setServerConfig()</code></a></p> <blockquote><ul><li>reads the pipeline configuration file <code>pipeline.config</code>, containing server URLs (e.g. Sonar, XL Release) etc.</li> <li>extracts the values for the corresponding parameters</li> <li>sets the parameters</li></ul></blockquote> <p><a href=".PipelineConfig#setTttGitConfig"><code>setTttGitConfig()</code></a></p> <blockquote><ul><li>reads the pipeline configuration file <code>tttgit.config</code>, containing information about the GitHub repository storing the Topaz for Total Test projects</li> <li>extracts the values for the corresponding parameters</li> <li>sets the parameters</li></ul></blockquote> <p><a href=".PipelineConfig#setMailConfig"><code>setMailConfig()</code></a></p> <blockquote><ul><li>loops though the list of <code>mailListLines</code> containing the <code>TSO user:email</code> pairs</li> <li>turns the records into a <code>Map</code></li> <li>determines the email address for the owner of the ISPW set and sets the parameter <code>mailRecipient</code> accordingly</li></ul></blockquote> <p><a href=".PipelineConfig#readConfigFile"><code>readConfigFile(String fileName)</code></a></p> <blockquote><p>uses an instance of the <a href="#FileHelper"><code>FileHelper</code></a> class to read the configuration files</p></blockquote> <h2 id="sonarhelper"><a href="#sonarhelper" aria-hidden="true" class="header-anchor">#</a> SonarHelper</h2> <p>The <a href="/pipelines/helper_classes/SonarHelper.html"><code>SonarHelper</code></a> class serves as a wrapper to execute the SonarQube scanner.(../pipeline_parameters.md).</p> <p><a href="/pipelines/helper_classes/SonarHelper.html#SonarHelper"><code>SonarHelper(script, steps, pConfig)</code></a></p> <blockquote><p>The constructor recieves the <code>script</code>object and the <code>steps</code> from the pipeline  and a <a href="/pipelines/helper_classes/#PipelineConfig"><code>PipelineConfig</code></a> to make use of pipeline execution specific parameters.</p></blockquote> <p><a href="/pipelines/helper_classes/SonarHelper.html#initialize"><code>initialize()</code></a></p> <blockquote><p>is used for additional <a href="/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the custructor</a> and determines the scanner home path</p></blockquote> <p><a href="/pipelines/helper_classes/SonarHelper.html#scan"><code>scan()</code></a></p> <blockquote><p>Executes the Sonar scanner. First it prepares all required parameters required for this scenario:</p> <ul><li><a href="https://docs.sonarqube.org/display/SONAR/Generic+Test+Data" target="_blank" rel="noopener noreferrer"><code>sonar.testExecutionReportPaths=</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allows using a comma-seprated list of paths the results of unit tests (Topaz for Total Test in our case) in the format required by the Sonar scanner.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.tests</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comma-seperated list of colders containing unit tests (Topaz for Total Test projects in our case)</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Generic+Test+Data" target="_blank" rel="noopener noreferrer"><code>coverageReportPaths</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> path to code coverage results. With Xpediter Code Coverage the results will reside in <code>Coverage/Coverage.xml</code>.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.projectKey</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> the SonarQube project key that is unique for each project. Our example pipelines use the <a href="https://wiki.jenkins.io/display/JENKINS/Building+a+software+project" target="_blank" rel="noopener noreferrer">Jenkins environment variable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>JOB_NAME</code>.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.projectName</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> the SonarQube project name that is unique for each project. Our example pipelines use the <a href="https://wiki.jenkins.io/display/JENKINS/Building+a+software+project" target="_blank" rel="noopener noreferrer">Jenkins environment variable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>JOB_NAME</code>.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.projectVersion</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> the SonarQube project version. The current examples to not modify the project version between executions.</li> <li><a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer"><code>sonar.sources</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comma-separated paths to directories containing source files. With the ISPW downloader the sources reside in folder <code>&lt;ispw_application&gt;/MF_Source</code>.</li> <li><a href="https://docs.sonarqube.org/display/PLUG/COBOL+Plugin+Advanced+Configuration" target="_blank" rel="noopener noreferrer"><code>sonar.cobol.copy.directories</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comma-separated paths to COBOL copybooks.  With the ISPW downloader the sources reside in folder <code>&lt;ispw_application&gt;/MF_Source</code> and the <code>downloadCopyBooks</code> method of the <a href="/pipelines/helper_classes/#IspwHelper.html"><code>IspwHelper</code></a> class cobybooks will reside in the same folder as the COBOL sources <code>&lt;ispw_application&gt;/MF_Source</code>.</li> <li><a href="https://docs.sonarqube.org/display/PLUG/COBOL+Plugin+Advanced+Configuration" target="_blank" rel="noopener noreferrer"><code>sonar.cobol.file.suffixes</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> file suffixes for the Sonar scanner to identify files that need to be scanned.</li> <li><a href="https://docs.sonarqube.org/display/PLUG/COBOL+Plugin+Advanced+Configuration" target="_blank" rel="noopener noreferrer"><code>sonar.cobol.copy.suffixes</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> file suffixes for the Sonar scanner to identify COBOL copybooks.</li></ul></blockquote> <h2 id="ttthelper"><a href="#ttthelper" aria-hidden="true" class="header-anchor">#</a> TttHelper</h2> <p>The <a href="/pipelines/helper_classes/TttHelper.html"><code>TttHelper</code></a> class serves as a wrapper around Topaz for Total Test related activities like, executing the unit tests for the downloaded programs in a loop, and gathering the results from Code Coverage.</p> <p><a href="/pipelines/helper_classes/TttHelper.html#TttHelper"><code>TttHelper(script, steps, pConfig)</code></a></p> <blockquote><p>The constructor recieves the <code>script</code>object and the <code>steps</code> from the pipeline  and a <a href="/pipelines/helper_classes/#PipelineConfig.html"><code>PipelineConfig</code></a> to make use of pipeline execution specific parameters.</p></blockquote> <p><a href="/pipelines/helper_classes/TttHelper.html#initialize"><code>initialize()</code></a></p> <blockquote><p>is used for additional <a href="/pipelines/Jenkins_Groovy.html">initialization which cannot be executed in the custructor</a> and</p> <ul><li>Instanciates a <code>JclSkeleton</code> for later use by <code>loopThruScenarios()</code>.</li> <li>Builds a list of downloaded COBOL sources and a list of downloaded <code>.testscenarios</code>.</li></ul></blockquote> <p><a href="/pipelines/helper_classes/TttHelper.html#loopThruScenarios"><code>loopThruScenarios()</code></a></p> <blockquote><p>loops through the <code>.testscenarios</code> and for each scenario</p> <ul><li>determines if the scenario matches one of the COBOL programs</li> <li>in that case</li> <li>the job card of the corresponding runner jcl gets replaced by the configuration job card</li> <li>the scenario gets executed</li></ul></blockquote> <p><a href="/pipelines/helper_classes/TttHelper.html#passResultsToJunit"><code>passResultsToJunit()</code></a></p> <blockquote><p>uses the JUnit plugin to display the unit test results on the pipeline dashboard.</p></blockquote> <p><a href="/pipelines/helper_classes/TttHelper.html#collectCodeCoverageResults"><code>collectCodeCoverageResults()</code></a></p> <blockquote><p>uses the Xpediter Code Coverage plugin to retrieve code coverage results from the Xpediter Code Coverage repository.</p></blockquote></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pipelines/config_files.html" class="prev">
          Configuration Files
        </a></span> <span class="next"><a href="/pipelines/Jenkins_Groovy.html">
          Groovy Tips
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.38dc2da7.js" defer></script><script src="/assets/js/33.b37a3e52.js" defer></script>
  </body>
</html>
